var FancyForm={start:function(B,A){FancyForm.runningInit=1;if($type(B)!="array"){B=$$("input")}if(!A){A=[]}FancyForm.onclasses=($type(A.onClasses)=="object")?A.onClasses:{checkbox:"checked",radio:"selected"};FancyForm.offclasses=($type(A.offClasses)=="object")?A.offClasses:{checkbox:"unchecked",radio:"unselected"};if($type(A.extraClasses)=="object"){FancyForm.extra=A.extraClasses}else{if(A.extraClasses){FancyForm.extra={checkbox:"f_checkbox",radio:"f_radio",on:"f_on",off:"f_off",all:"fancy"}}else{FancyForm.extra={}}}FancyForm.onSelect=$pick(A.onSelect,function(D){});FancyForm.onDeselect=$pick(A.onDeselect,function(D){});var C=[];FancyForm.chks=B.filter(function(D){if($type(D)!="element"){return false}if(D.getTag()=="input"&&(FancyForm.onclasses[D.getProperty("type")])){var E=D.getParent();if(E.getElement("input")==D){E.type=D.getProperty("type");E.inputElement=D;this.push(E)}else{D.addEvent("click",function(F){F.stopPropagation()})}}else{if((D.inputElement=D.getElement("input"))&&(FancyForm.onclasses[(D.type=D.inputElement.getProperty("type"))])){return true}}return false}.bind(C));FancyForm.chks=FancyForm.chks.merge(C);C=null;FancyForm.chks.each(function(D){D.inputElement.setStyle("position","absolute");D.inputElement.setStyle("left","-9999px");D.addEvent("selectStart",function(){});D.name=D.inputElement.getProperty("name");if(D.inputElement.checked){FancyForm.select(D)}else{FancyForm.deselect(D)}D.addEvent("click",function(E){var E=new Event(E);if(D.inputElement.getProperty("disabled")){return }if($type(E.preventDefault)=="function"){E.preventDefault(true)}else{if($type(E.returnValue)=="function"){E.returnValue(true)}}if(!D.hasClass(FancyForm.onclasses[D.type])){FancyForm.select(D)}else{FancyForm.deselect(D)}FancyForm.focusing=1;D.inputElement.focus();FancyForm.focusing=0});D.addEvent("mousedown",function(E){if($type(E.preventDefault)=="function"){E.preventDefault(true)}else{if($type(E.returnValue)=="function"){E.returnValue(true)}}});D.inputElement.addEvent("focus",function(E){if(!FancyForm.focusing){D.setStyle("outline","1px dotted")}});D.inputElement.addEvent("blur",function(E){D.setStyle("outline","0")});if(extraclass=FancyForm.extra[D.type]){D.addClass(extraclass)}if(extraclass=FancyForm.extra.all){D.addClass(extraclass)}});FancyForm.runningInit=0},select:function(A){A.inputElement.checked="checked";A.removeClass(FancyForm.offclasses[A.type]);A.addClass(FancyForm.onclasses[A.type]);if(A.type=="radio"){FancyForm.chks.each(function(B){if(B.name!=A.name||B==A){return }FancyForm.deselect(B)})}if(extraclass=FancyForm.extra.on){A.addClass(extraclass)}if(extraclass=FancyForm.extra.off){A.removeClass(extraclass)}if(!FancyForm.runningInit){FancyForm.onSelect(A)}},deselect:function(A){A.inputElement.checked=false;A.removeClass(FancyForm.onclasses[A.type]);A.addClass(FancyForm.offclasses[A.type]);if(extraclass=FancyForm.extra.off){A.addClass(extraclass)}if(extraclass=FancyForm.extra.on){A.removeClass(extraclass)}if(!FancyForm.runningInit){FancyForm.onDeselect(A)}},all:function(){FancyForm.chks.each(function(A){FancyForm.select(A)})},none:function(){FancyForm.chks.each(function(A){FancyForm.deselect(A)})}};window.addEvent("domready",function(){FancyForm.start()});